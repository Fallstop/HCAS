{"version":3,"sources":["../../resources/js/app.js"],"names":["clearHash","history","pushState","document","title","window","location","pathname","search","$types","$","$pages","$loader","$loaderText","$guestName","$memberName","$guestSubmit","$memberSubmit","on","hash","pages","length","page","substr","includes","resetPage","toPage","id","prop","addClass","removeClass","val","selectedMember","clearMembersList","members","loadMembers","showLoader","fail","point","showToast","get","done","res","hasOwnProperty","status","always","hideLoader","getRelevantMembers","name","toLowerCase","matching","rankings","forEach","member","lowerName","ranking","startsWith","indexOf","push","sort","a","b","$membersList","children","remove","fillMembersList","$item","text","$radio","type","value","$button","$parent","parent","checked","is","hasClass","attr","appendTo","currentToastTimeout","undoCallback","error","duration","$toast","$toastText","$toastUndo","bind","css","clearTimeout","setTimeout","unbind","saveAttendance","removeAttendance","callback","post","reason","ajax","data","console","log","undefined","parents"],"mappings":"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","sourcesContent":["const clearHash = () => history.pushState(\"\", document.title, window.location.pathname + window.location.search);\r\n\r\nconst $types = $('#types');\r\nconst $pages = $('#pages');\r\nconst $loader = $('#loader');\r\nconst $loaderText = $('#loaderText');\r\n\r\nconst $guestName = $('#guestName');\r\nconst $memberName = $('#memberName');\r\n\r\nconst $guestSubmit = $('#guestSubmit');\r\nconst $memberSubmit = $('#memberSubmit');\r\n\r\n/*\r\n*   Start Page Manipulation\r\n*\r\n*   This section of code controls the changing of the page\r\n*   contents when the window hash changes\r\n*   (#member, $guest, #facilitator)\r\n*\r\n*/\r\n\r\n$(window).on('hashchange', () => {\r\n    const hash = window.location.hash // The current window hash (e.g #guest)\r\n    const pages = [\"guest\", \"member\", \"facilitator\"]; // A list of the valid pages\r\n    if (hash.length < 1) {  // The hash was removed so we can ignore it\r\n        return;\r\n    }\r\n    const page = hash.substr(1); // We remove the # from the hash to get the page name\r\n    if (!pages.includes(page)) {  // Check if the page isn't valid\r\n        return resetPage(); // Reset the page\r\n    }\r\n    toPage(page); // Open the page\r\n})\r\n\r\nfunction toPage(id) {\r\n    $('.member-types__type').prop('disabled', true);\r\n    $types.addClass('member-types--hidden');\r\n    $pages.removeClass('sign-pages--hidden');\r\n    $(`.sign-pages__page[page-id=\"${id}\"]`).removeClass('sign-pages__page--hidden');\r\n}\r\n\r\nfunction resetPage() {\r\n    $('.member-types__type').prop('disabled', false);\r\n    $types.removeClass('member-types--hidden');\r\n    $pages.addClass('sign-pages--hidden');\r\n    $('.sign-pages__page').addClass('sign-pages__page--hidden');\r\n    clearHash();\r\n    $guestName.val('');\r\n    $memberName.val('');\r\n    $('.members__list__item').prop('checked', false);\r\n    selectedMember = null;\r\n    $memberSubmit.prop('disabled', true);\r\n    clearMembersList();\r\n}\r\n\r\n// Make the back button reset the page\r\n$('#signBack').on('click', () => resetPage())\r\n\r\n/*\r\n*   End Page Manipulation\r\n*\r\n*   ########################\r\n*\r\n*   Start Member Handling\r\n*\r\n*   This section of code controls retrieving the members list from\r\n*   the backend, filtering, and sorting that data to display it\r\n*\r\n*/\r\n\r\n// This stores the list of members retrieved from the server\r\nlet members = [];\r\nlet selectedMember = null;\r\n\r\nfunction loadMembers() {\r\n    // Display the loader so the user knows whats happening\r\n    showLoader('Loading Members...');\r\n    // A Function that is called if we failed\r\n    const fail = (point) => showToast('Failed to load members... POINT=' + point, null, true);\r\n    // Ajax request to /members the backend endpoint for the members list\r\n    $.get('/members')\r\n        // If the request succeeds\r\n        .done(res => {\r\n            // Make sure the request isn't malformed\r\n            if (!res.hasOwnProperty('status')) {\r\n                fail(0); // Failed because missing status\r\n            } else {\r\n                if (res.status === 'success' && res.hasOwnProperty(\"members\")) {\r\n                    members = res.members;\r\n                } else {\r\n                    fail(1);\r\n                }\r\n            }\r\n        })\r\n        // If the request fails\r\n        .fail(() => fail(2))\r\n        // We always want to close the loader no matter the result\r\n        .always(() => hideLoader());\r\n}\r\n\r\nfunction getRelevantMembers(name) {\r\n\r\n    /*\r\n    *   Names are ranked using a score from 0 - 8\r\n    *   the score is determined by how much matching\r\n    *   parts the name has with the member\r\n    *\r\n    *   Full Match: 4\r\n    *   Start Match +2\r\n    *   Contains Match +1\r\n    *\r\n    *   All of these can stack up except for the full match\r\n    */\r\n\r\n    // If the name is null we ignore everyone\r\n    if (name == null) {\r\n        return [];\r\n    }\r\n    name = name.toLowerCase();\r\n    const matching = [];\r\n    // Each of the names and their rankings\r\n    const rankings = {};\r\n    members.forEach(member => {\r\n        const lowerName = member.toLowerCase();\r\n        let ranking = 0;\r\n        if (name === lowerName) {\r\n            ranking = 4;\r\n        } else {\r\n            if (lowerName.startsWith(name)) ranking += 2;\r\n            if (lowerName.indexOf(name) >= 0) ranking += 1;\r\n        }\r\n        rankings[member] = ranking;\r\n        if (ranking > 0) {\r\n            matching.push(member);\r\n        }\r\n    });\r\n    // Sort the names with their ranking (inverted sorting so higher ranks appear first)\r\n    matching.sort((a, b) => rankings[b] - rankings[a]);\r\n    return matching;\r\n}\r\n\r\nfunction clearMembersList() {\r\n    const $membersList = $('#membersList');\r\n    $membersList.children().remove();\r\n}\r\n\r\nfunction fillMembersList(name = null) {\r\n    if (name == null || name.length === 0) name = null;\r\n    const $membersList = $('#membersList');\r\n    const members = getRelevantMembers(name);\r\n    clearMembersList();\r\n    members.forEach(member => {\r\n        const $item = $('<label/>', {class: 'members__list__item', text: member});\r\n        const $radio = $('<input/>', {\r\n            type: 'radio',\r\n            name: 'members',\r\n            class: 'members__list__item__button',\r\n            value: member\r\n        });\r\n        $radio.on('click', function () {\r\n            const $button = $(this);\r\n            const $parent = $button.parent();\r\n            const checked = $button.is(':checked');\r\n            if (checked) {\r\n                if ($parent.hasClass('members__list__item--selected')) { // Add unselect functionality\r\n                    $parent.removeClass('members__list__item--selected') // Remove the selected class\r\n                    selectedMember = null; // Clear the selected member\r\n                    $button.prop('checked', false) // Set the checked state\r\n                } else {\r\n                    $('.members__list__item').removeClass('members__list__item--selected');\r\n                    $parent.addClass('members__list__item--selected')\r\n                    selectedMember = $button.attr('value');\r\n                }\r\n            }\r\n            // Set the done button to disabled if the selected member is null otherwise enable it\r\n            $memberSubmit.prop('disabled', selectedMember == null);\r\n        })\r\n        $radio.appendTo($item);\r\n        $item.appendTo($membersList);\r\n    });\r\n}\r\n\r\n$memberName.on('input', () => fillMembersList($memberName.val()))\r\n\r\n\r\n/*\r\n*   End Member Handling\r\n*\r\n*   ########################\r\n*\r\n*   Start Loading Handling & Toasts\r\n*\r\n*   This section of code controls the displaying and hiding\r\n*   of page loaders and toasts\r\n*\r\n*/\r\n\r\nfunction showLoader(text = \"Loading...\") {\r\n    $loader.addClass('loader__wrapper--open');\r\n    $loaderText.val(text);\r\n}\r\n\r\nfunction hideLoader() {\r\n    $loader.removeClass('loader__wrapper--open');\r\n}\r\n\r\nlet currentToastTimeout = -1;\r\n\r\nfunction showToast(text, undoCallback = null, error = false, duration = 2500) {\r\n    const $toast = $('#toast');\r\n    const $toastText = $('#toastText');\r\n    const $toastUndo = $('#toastUndo');\r\n    if (error) {\r\n        $toast.addClass('toast--error');\r\n    } else {\r\n        $toast.removeClass('toast--error');\r\n    }\r\n    $toastUndo.bind('click', () => undoCallback != null && undoCallback());\r\n    if (undoCallback == null) {\r\n        $toastUndo.css('display', 'none');\r\n    } else {\r\n        $toastUndo.css('display', 'revert');\r\n    }\r\n    $toastText.text(text);\r\n    $toast.removeClass('toast--hidden');\r\n    if (currentToastTimeout !== -1) {\r\n        clearTimeout(currentToastTimeout);\r\n    }\r\n    currentToastTimeout = setTimeout(() => {\r\n        $toast.addClass('toast--hidden');\r\n        $toastUndo.unbind('click');\r\n    }, duration);\r\n}\r\n\r\n\r\n// Clear the page hash on reload\r\nclearHash();\r\nloadMembers();\r\n\r\n\r\n/*\r\n*   End Loading Handling & Toasts\r\n*\r\n*   ########################\r\n*\r\n*   Start Attendance Marking\r\n*\r\n*   This section of code controls the marking of attendance\r\n*   via the backend along with its respective frontend\r\n*\r\n*/\r\n\r\n$memberSubmit.on('click', () => {\r\n    if (selectedMember == null) return;\r\n    const name = selectedMember;\r\n    saveAttendance(name, true, () => {\r\n        showToast('Successfully marked attendance for \"' + name + '\"', () => {\r\n            showToast('Reverted attendance for \"' + name + '\"')\r\n        });\r\n        resetPage();\r\n    });\r\n});\r\n\r\n$guestSubmit.on('click', () => {\r\n    const name = $guestName.val();\r\n    if (name != null && name.length > 0) {\r\n        saveAttendance(name, false, () => {\r\n            showToast('Successfully marked attendance for \"' + name + '\"', () => {\r\n                removeAttendance(name, ()=>{\r\n                    showToast('Reverted attendance for \"' + name + '\"')\r\n                })\r\n            });\r\n            resetPage();\r\n        })\r\n    }\r\n});\r\n\r\nfunction saveAttendance(name, member, callback) {\r\n    showLoader('Saving Attendance...');\r\n    // A Function that is called if we failed\r\n    const fail = (point) => showToast('Failed to mark attendance... POINT=' + point, null, true);\r\n    $.post('/attendance', {name: name, member: member}).done(res => {\r\n        // Make sure the request isn't malformed\r\n        if (!res.hasOwnProperty('status')) {\r\n            fail(0); // Failed because missing status\r\n        } else {\r\n            if (res.status === 'success') {\r\n                callback();\r\n            } else {\r\n                if (res.hasOwnProperty(\"reason\")) {\r\n                    showToast(res.reason, null, true);\r\n                } else fail(1);\r\n            }\r\n        }\r\n    }).fail(() => fail(2)).always(() => hideLoader());\r\n}\r\n\r\nfunction removeAttendance(name, callback) {\r\n    showLoader('Removing Attendance...');\r\n    // A Function that is called if we failed\r\n    const fail = (point) => showToast('Failed to change attendance... POINT=' + point, null, true);\r\n    $.ajax('/attendance', {type: 'DELETE', data: {name: name}}).done(res => {\r\n        // Make sure the request isn't malformed\r\n        if (!res.hasOwnProperty('status')) {\r\n            fail(0); // Failed because missing status\r\n        } else {\r\n            if (res.status === 'success') {\r\n                showToast('Successfully removed attendance for \"' + name + '\"', null);\r\n                callback();\r\n            } else {\r\n                fail(1);\r\n            }\r\n        }\r\n    }).fail(() => fail(2)).always(() => hideLoader());\r\n}\r\n\r\n$('.attendance__list__item__buttons__button').on('click', function () {\r\n    const $button = $(this);\r\n    const name = $button.attr('data-name');\r\n    console.log(name)\r\n    if (name !== undefined && name !== null) {\r\n        removeAttendance(name, () => $button.parents('.attendance__list__item').remove());\r\n    }\r\n})"],"file":"app.js"}