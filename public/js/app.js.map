{"version":3,"sources":["../../resources/js/app.js"],"names":["clearHash","history","pushState","document","title","window","location","pathname","search","$types","$","$pages","$loader","$loaderText","$guestName","$memberName","$guestSubmit","$memberSubmit","on","hash","pages","length","page","substr","includes","resetPage","toPage","id","prop","addClass","removeClass","val","selectedMember","clearMembersList","members","loadMembers","showLoader","fail","point","showToast","get","done","res","hasOwnProperty","status","always","hideLoader","getRelevantMembers","name","toLowerCase","matching","rankings","forEach","member","lowerName","ranking","startsWith","indexOf","push","sort","a","b","$membersList","children","remove","fillMembersList","$item","text","$radio","type","value","$button","$parent","parent","checked","is","hasClass","attr","appendTo","e","keyCode","viewMembers","trigger","currentToastTimeout","undoCallback","error","duration","$toast","$toastText","$toastUndo","bind","css","clearTimeout","setTimeout","unbind","saveAttendance","reason","post","removeAttendance","callback","ajax","data","undefined","parents"],"mappings":"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","sourcesContent":["// Clears the window hash\r\nconst clearHash = () => history.pushState(\"\", document.title, window.location.pathname + window.location.search);\r\n\r\nconst $types = $('#types');\r\nconst $pages = $('#pages');\r\nconst $loader = $('#loader');\r\nconst $loaderText = $('#loaderText');\r\n\r\nconst $guestName = $('#guestName');\r\nconst $memberName = $('#memberName');\r\n\r\nconst $guestSubmit = $('#guestSubmit');\r\nconst $memberSubmit = $('#memberSubmit');\r\n\r\n/*\r\n*   Start Page Manipulation\r\n*\r\n*   This section of code controls the changing of the page\r\n*   contents when the window hash changes\r\n*   (#member, $guest, #facilitator)\r\n*\r\n*/\r\n\r\n$(window).on('hashchange', () => {\r\n    const hash = window.location.hash // The current window hash (e.g #guest)\r\n    const pages = [\"guest\", \"member\", \"facilitator\"]; // A list of the valid pages\r\n    if (hash.length < 1) {  // The hash was removed so we can ignore it\r\n        return;\r\n    }\r\n    const page = hash.substr(1); // We remove the # from the hash to get the page name\r\n    if (!pages.includes(page)) {  // Check if the page isn't valid\r\n        return resetPage(); // Reset the page\r\n    }\r\n    toPage(page); // Open the page\r\n})\r\n\r\nfunction toPage(id) {\r\n    // Disable all type buttons so that hitting tab wont focus on them\r\n    $('.member-types__type').prop('disabled', true);\r\n    $types.addClass('member-types--hidden'); // Add the hidden class to hide it\r\n    $pages.removeClass('sign-pages--hidden'); // Remove the hidden class to show it\r\n    $(`.sign-pages__page[page-id=\"${id}\"]`).removeClass('sign-pages__page--hidden'); // Remove the hidden class for the current page\r\n}\r\n\r\nfunction resetPage() {\r\n    $('.member-types__type').prop('disabled', false); // Make the member types not hidden\r\n    $types.removeClass('member-types--hidden'); // Remove the hidden class to show it\r\n    $pages.addClass('sign-pages--hidden'); // Add the hidden class to hide it\r\n    $('.sign-pages__page').addClass('sign-pages__page--hidden'); // Add hidden class to hide the pages\r\n    clearHash(); // Clear the current page\r\n    $guestName.val(''); // Reset the guest name\r\n    $memberName.val('');  // Reset the member name\r\n    $('.members__list__item').prop('checked', false); // Uncheck all the members radio buttons\r\n    selectedMember = null; // Set the selected member to done\r\n    $memberSubmit.prop('disabled', true); // Disable the member submit button\r\n    clearMembersList(); // Clear the list of members\r\n}\r\n\r\n// Make the back button reset the page\r\n$('#signBack').on('click', () => resetPage())\r\n\r\n/*\r\n*   End Page Manipulation\r\n*\r\n*   ########################\r\n*\r\n*   Start Member Handling\r\n*\r\n*   This section of code controls retrieving the members list from\r\n*   the backend, filtering, and sorting that data to display it\r\n*\r\n*/\r\n\r\n// This stores the list of members retrieved from the server\r\nlet members = [];\r\nlet selectedMember = null; // Stores the selected member\r\n\r\nfunction loadMembers() {\r\n    // Display the loader so the user knows whats happening\r\n    showLoader('Loading Members...');\r\n    // A Function that is called if we failed\r\n    const fail = (point) => showToast('Failed to load members... POINT=' + point, null, true);\r\n    // Ajax request to /members the backend endpoint for the members list\r\n    $.get('/members')\r\n        // If the request succeeds\r\n        .done(res => {\r\n            // Make sure the request isn't malformed\r\n            if (!res.hasOwnProperty('status')) {\r\n                fail(0); // Failed because missing status\r\n            } else {\r\n                if (res.status === 'success' && res.hasOwnProperty(\"members\")) {\r\n                    members = res.members;\r\n                } else {\r\n                    fail(1);\r\n                }\r\n            }\r\n        })\r\n        // If the request fails\r\n        .fail(() => fail(2))\r\n        // We always want to close the loader no matter the result\r\n        .always(() => hideLoader());\r\n}\r\n\r\nfunction getRelevantMembers(name) {\r\n\r\n    /*\r\n    *   Names are ranked using a score from 0 - 8\r\n    *   the score is determined by how much matching\r\n    *   parts the name has with the member\r\n    *\r\n    *   Full Match: 4\r\n    *   Start Match +2\r\n    *   Contains Match +1\r\n    *\r\n    *   All of these can stack up except for the full match\r\n    */\r\n\r\n    // If the name is null we ignore everyone\r\n    if (name == null) {\r\n        return [];\r\n    }\r\n    name = name.toLowerCase();\r\n    const matching = [];\r\n    // Each of the names and their rankings\r\n    const rankings = {};\r\n    members.forEach(member => {\r\n        const lowerName = member.toLowerCase();\r\n        let ranking = 0;\r\n        if (name === lowerName) {\r\n            ranking = 4;\r\n        } else {\r\n            if (lowerName.startsWith(name)) ranking += 2;\r\n            if (lowerName.indexOf(name) >= 0) ranking += 1;\r\n        }\r\n        rankings[member] = ranking;\r\n        if (ranking > 0) {\r\n            matching.push(member);\r\n        }\r\n    });\r\n    // Sort the names with their ranking (inverted sorting so higher ranks appear first)\r\n    matching.sort((a, b) => rankings[b] - rankings[a]);\r\n    return matching;\r\n}\r\n\r\n// Clear the list of members\r\nfunction clearMembersList() {\r\n    const $membersList = $('#membersList');\r\n    $membersList.children().remove(); // Remove all the children\r\n}\r\n\r\n// Fill the list of members with names relevant to the search\r\nfunction fillMembersList(name = null) {\r\n    if (name == null || name.length === 0) name = null; // If the name is empty we just make it null\r\n    const $membersList = $('#membersList');\r\n    const members = getRelevantMembers(name); // Get the members relevant to the search\r\n    clearMembersList(); // Clear the list of members\r\n    // Loop through all the members\r\n    members.forEach(member => {\r\n        // Create the label wrapping so the whole thing acts a radio button\r\n        const $item = $('<label/>', {class: 'members__list__item', text: member});\r\n        // Create the radio button\r\n        const $radio = $('<input/>', {\r\n            type: 'radio',\r\n            name: 'members',\r\n            class: 'members__list__item__button',\r\n            value: member\r\n        });\r\n        // Set the click logic for the radio button\r\n        $radio.on('click', function () {\r\n            const $button = $(this); // Get a jquery instance of the button\r\n            const $parent = $button.parent(); // Get the parent element\r\n            const checked = $button.is(':checked'); // Check if the button is checked\r\n            if (checked) {\r\n                if ($parent.hasClass('members__list__item--selected')) { // Add unselect functionality\r\n                    $parent.removeClass('members__list__item--selected') // Remove the selected class\r\n                    selectedMember = null; // Clear the selected member\r\n                    $button.prop('checked', false) // Set the checked state\r\n                } else {\r\n                    $('.members__list__item').removeClass('members__list__item--selected'); // Remove the selected class from the other elements\r\n                    $parent.addClass('members__list__item--selected'); // Add the selected class\r\n                    selectedMember = $button.attr('value'); // Set the selected member to the value of the radio button\r\n                }\r\n            }\r\n            // Set the done button to disabled if the selected member is null otherwise enable it\r\n            $memberSubmit.prop('disabled', selectedMember == null);\r\n        })\r\n        // Append the radio button to the item\r\n        $radio.appendTo($item);\r\n        // Append the item to the members list\r\n        $item.appendTo($membersList);\r\n    });\r\n}\r\n\r\n// Change the contents of the members list when the name changes\r\n$memberName.on('input', () => fillMembersList($memberName.val()))\r\n// When a key is released for the GuestName input\r\n$memberName.on('keyup', (e) => {\r\n    if (e.keyCode === 13) { // Enter key pushed\r\n        let name = $memberName.val();\r\n        if (name == null || name.length === 0) name = null; // If the name is empty we just make it null\r\n        const viewMembers = getRelevantMembers(name);\r\n        if (viewMembers.length > 0) { // Make sure we have members\r\n            selectedMember = viewMembers[0]; // Selected the first member\r\n            $('.members__list__item__button[value=\"' + selectedMember + '\"]').trigger('click'); // Select the corresponding input\r\n            $memberSubmit.prop('disabled', selectedMember == null); // Enable the button\r\n            $memberSubmit.trigger('click'); // Click the button\r\n        }\r\n    }\r\n});\r\n\r\n/*\r\n*   End Member Handling\r\n*\r\n*   ########################\r\n*\r\n*   Start Loading Handling & Toasts\r\n*\r\n*   This section of code controls the displaying and hiding\r\n*   of page loaders and toasts\r\n*\r\n*/\r\n\r\nfunction showLoader(text = \"Loading...\") {\r\n    $loader.addClass('loader__wrapper--open'); // Add the open loader class\r\n    $loaderText.val(text); // Set the text of the loader\r\n}\r\n\r\nfunction hideLoader() {\r\n    $loader.removeClass('loader__wrapper--open'); // Remove the loader open class\r\n}\r\n\r\nlet currentToastTimeout = -1; // The timeout identifier of setTimeout for the toast\r\n\r\nfunction showToast(text, undoCallback = null, error = false, duration = 2500) {\r\n    const $toast = $('#toast');\r\n    const $toastText = $('#toastText');\r\n    const $toastUndo = $('#toastUndo');\r\n    if (error) { // If the toast in an error toast add the error class\r\n        $toast.addClass('toast--error');\r\n    } else { // Otherwise remove the error class\r\n        $toast.removeClass('toast--error');\r\n    }\r\n    // Bind bind the click event to the undo callback if it exists\r\n    $toastUndo.bind('click', () => undoCallback != null && undoCallback());\r\n    if (undoCallback == null) { // If there is no undo callback hide the undo button\r\n        $toastUndo.css('display', 'none');\r\n    } else {\r\n        $toastUndo.css('display', 'revert');\r\n    }\r\n    $toastText.text(text); // Set the toast text\r\n    $toast.removeClass('toast--hidden'); // Remove the toast hidden class\r\n    if (currentToastTimeout !== -1) { // If there is already a timeout\r\n        clearTimeout(currentToastTimeout); // Clear the current timeout\r\n    }\r\n    // Set the timeout to a new setTimeout\r\n    currentToastTimeout = setTimeout(() => { // When the duration is complete\r\n        $toast.addClass('toast--hidden'); // Add the hidden class again\r\n        $toastUndo.unbind('click'); // Unbind the click callback\r\n    }, duration);\r\n}\r\n\r\n\r\n// Clear the page hash on reload\r\nclearHash();\r\n// Only load members on the main page not /attending\r\nif (document.location.pathname !== '/attending') {\r\n    loadMembers();\r\n}\r\n\r\n\r\n/*\r\n*   End Loading Handling & Toasts\r\n*\r\n*   ########################\r\n*\r\n*   Start Attendance Marking\r\n*\r\n*   This section of code controls the marking of attendance\r\n*   via the backend along with its respective frontend\r\n*\r\n*/\r\n\r\n$memberSubmit.on('click', () => {\r\n    if (selectedMember == null) return; // If there is no selected member return\r\n    const name = selectedMember;\r\n    // Save the attendance\r\n    saveAttendance(name, true);\r\n});\r\n\r\n// When a key is released for the GuestName input\r\n$guestName.on('keyup', (e) => {\r\n    if (e.keyCode === 13) { // Enter key pushed\r\n        $guestSubmit.trigger('click'); // Click the button for the user\r\n    }\r\n});\r\n// When the guest submit button is clicked\r\n$guestSubmit.on('click', () => {\r\n    const name = $guestName.val();\r\n    if (name != null && name.length > 0) {\r\n        // Save the attendance\r\n        saveAttendance(name, false);\r\n    }\r\n});\r\n\r\nfunction saveAttendance(name, member) {\r\n    showLoader('Saving Attendance...');\r\n    // A Function that is called if we failed\r\n    const fail = (reason) => showToast('Failed to mark attendance: ' + reason, null, true);\r\n    $.post('/attendance', {name: name, member: member}).done(res => {\r\n        // Make sure the request isn't malformed\r\n        if (!res.hasOwnProperty('status')) {\r\n            fail('Malformed server data'); // Failed because missing status\r\n        } else {\r\n            if (res.status === 'success') {\r\n                // Show a toast telling the user its been marked\r\n                showToast('Successfully marked attendance for \"' + name + '\"', () => { // The callback that occurs if undo is pressed\r\n                    // Remove the attendance\r\n                    removeAttendance(name, () => { // After the attendance is removed\r\n                        showToast('Reverted attendance for \"' + name + '\"'); // Show a toast telling the user its been reverted\r\n                    })\r\n                });\r\n                // Take the user back to the main page\r\n                resetPage();\r\n            } else {\r\n                if (res.hasOwnProperty(\"reason\")) {\r\n                    // Show a error toast\r\n                    showToast(res.reason, null, true);\r\n                } else fail('Unknown Reason');\r\n            }\r\n        }\r\n    }).fail(() => fail('Unable to connect')) // The request failed\r\n        .always(() => hideLoader()); // Always close the loader no matter the result\r\n}\r\n\r\nfunction removeAttendance(name, callback) {\r\n    showLoader('Removing Attendance...');\r\n    // A Function that is called if we failed\r\n    const fail = (reason) => showToast('Failed to change attendance: ' + reason, null, true);\r\n    $.ajax('/attendance', {type: 'DELETE', data: {name: name}}).done(res => {\r\n        // Make sure the request isn't malformed\r\n        if (!res.hasOwnProperty('status')) {\r\n            fail('Malformed server data'); // Failed because missing status\r\n        } else {\r\n            if (res.status === 'success') {\r\n                // Show a toast letting the user know the attendance was marked\r\n                showToast('Successfully removed attendance for \"' + name + '\"', null);\r\n                // Run the callback\r\n                callback();\r\n            } else fail('Unknown Reason');\r\n        }\r\n    }).fail(() => fail('Unable to connect')) // The request failed\r\n        .always(() => hideLoader()); // Always close the loader no matter the result\r\n}\r\n\r\n$('.attendance__list__item__buttons__button').on('click', function () {\r\n    const $button = $(this);\r\n    // The name of the attendance item\r\n    const name = $button.attr('data-name');\r\n    if (name !== undefined && name !== null) {\r\n        // Remove the attendance for that name\r\n        removeAttendance(name, () => $button.parents('.attendance__list__item').remove());\r\n    }\r\n})"],"file":"app.js"}